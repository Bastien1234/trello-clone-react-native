{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport React, { useState, useContext } from 'react';\nimport axios from 'axios';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport constants from \"../constants/constants\";\nvar backendUrl = constants.URL + \"/api/v1/users/login\";\nimport { UserContext } from \"./../context/userContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar LoginScreen = function LoginScreen(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useContext = useContext(UserContext),\n      userContext = _useContext.userContext,\n      setUserContext = _useContext.setUserContext;\n\n  var _useState = useState({\n    email: \"\",\n    password: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      newUser = _useState2[0],\n      setNewUser = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      bottomMessage = _useState4[0],\n      setBottomMessage = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isLoading = _useState6[0],\n      setisLoading = _useState6[1];\n\n  var login = function _callee() {\n    var response, currUser, newObj;\n    return _regeneratorRuntime.async(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            newUser.email = newUser.email.toString().toLowerCase();\n            newUser.password = newUser.password.toString().toLowerCase();\n            _context.next = 5;\n            return _regeneratorRuntime.awrap(axios.post(backendUrl, newUser));\n\n          case 5:\n            response = _context.sent;\n\n            if (response.status === 200) {\n              currUser = response.data.user;\n              newObj = {\n                _id: currUser._id,\n                email: currUser.email,\n                firstName: currUser.firstName,\n                lastName: currUser.lastName,\n                spaces: currUser.spaces\n              };\n              setUserContext(newObj);\n              setBottomMessage(\"Successully connected !\");\n              setTimeout(function () {\n                navigation.navigate(\"Tableaux\");\n              }, 500);\n            }\n\n            _context.next = 13;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(\"error : \", _context.t0.message);\n            setBottomMessage(\"Wo wo wo !! problème !\");\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  return _jsxs(SafeAreaView, {\n    style: {\n      backgroundColor: \"white\",\n      flex: 1\n    },\n    children: [_jsx(View, {\n      style: styles.header,\n      children: _jsx(Text, {\n        style: {\n          fontSize: 25,\n          color: \"white\"\n        },\n        children: \"Se connecter\"\n      })\n    }), _jsxs(View, {\n      children: [_jsx(Image, {\n        source: require(\"./../assets/images/trello-logo.png\"),\n        style: _objectSpread(_objectSpread({}, constants.logoStyle), {}, {\n          marginTop: 15,\n          alignSelf: \"center\",\n          marginBottom: 20\n        })\n      }), _jsx(TextInput, {\n        placeholder: \"Email\",\n        style: styles.placeholder,\n        value: newUser.email,\n        onChangeText: function onChangeText(t) {\n          setNewUser(_objectSpread(_objectSpread({}, newUser), {}, {\n            email: t\n          }));\n          console.log(newUser);\n        }\n      }), _jsx(TextInput, {\n        placeholder: \"Password\",\n        style: styles.placeholder,\n        value: newUser.password,\n        secureTextEntry: true,\n        onChangeText: function onChangeText(t) {\n          setNewUser(_objectSpread(_objectSpread({}, newUser), {}, {\n            password: t.toString()\n          }));\n          console.log(newUser);\n        }\n      })]\n    }), _jsx(Pressable, {\n      style: {\n        backgroundColor: constants.blue,\n        height: 50,\n        width: 200,\n        borderRadius: 10,\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        alignSelf: \"center\",\n        marginTop: 10\n      },\n      onPress: function onPress() {\n        return login();\n      },\n      children: _jsx(Text, {\n        style: {\n          fontSize: 20,\n          color: \"white\"\n        },\n        children: \"Log in\"\n      })\n    }), _jsx(Pressable, {\n      style: {\n        backgroundColor: constants.blue,\n        height: 50,\n        width: 200,\n        borderRadius: 10,\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        alignSelf: \"center\",\n        marginTop: 10\n      },\n      onPress: function onPress() {\n        return navigation.navigate(\"Signup\");\n      },\n      children: _jsx(Text, {\n        style: {\n          fontSize: 20,\n          color: \"white\"\n        },\n        children: \"Cr\\xE9er un compte\"\n      })\n    }), _jsx(Text, {\n      style: {\n        alignSelf: \"center\",\n        fontSize: 20,\n        color: \"red\",\n        marginTop: 20\n      },\n      children: bottomMessage\n    })]\n  });\n};\n\nexport default LoginScreen;\nvar styles = StyleSheet.create({\n  header: {\n    backgroundColor: constants.blue,\n    height: constants.headerHeight,\n    justifyContent: \"center\",\n    alignItems: \"center\"\n  },\n  main: {\n    flex: 1\n  },\n  placeholder: {\n    fontSize: 18,\n    borderBottomWidth: 2,\n    borderBottomColor: \"beige\",\n    borderLeftWidth: 2,\n    borderLeftColor: \"beige\",\n    marginLeft: 10,\n    marginBottom: 25,\n    paddingLeft: 15,\n    paddingBottom: 5,\n    width: \"90%\"\n  }\n});","map":{"version":3,"sources":["C:/Users/mr b/Desktop/trello-clone-native/screens/LoginScreen.js"],"names":["React","useState","useContext","axios","SafeAreaView","constants","backendUrl","URL","UserContext","LoginScreen","navigation","userContext","setUserContext","email","password","newUser","setNewUser","bottomMessage","setBottomMessage","isLoading","setisLoading","login","toString","toLowerCase","post","response","status","currUser","data","user","newObj","_id","firstName","lastName","spaces","setTimeout","navigate","console","log","message","backgroundColor","flex","styles","header","fontSize","color","require","logoStyle","marginTop","alignSelf","marginBottom","placeholder","t","blue","height","width","borderRadius","justifyContent","alignItems","StyleSheet","create","headerHeight","main","borderBottomWidth","borderBottomColor","borderLeftWidth","borderLeftColor","marginLeft","paddingLeft","paddingBottom"],"mappings":"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","sourcesContent":["import { StyleSheet, Text, View, TextInput, Image, Pressable } from 'react-native';\r\nimport React, { useState, useContext } from 'react';\r\nimport axios from 'axios';\r\n\r\n\r\nimport { SafeAreaView } from 'react-native-safe-area-context';\r\n\r\n\r\nimport constants from '../constants/constants';\r\nconst backendUrl = `${constants.URL}/api/v1/users/login`;\r\n\r\nimport { UserContext } from './../context/userContext';\r\n\r\n\r\nconst LoginScreen = ({ navigation }) => {\r\n    const { userContext, setUserContext } = useContext(UserContext);\r\n    // States for creating use\r\n    const [newUser,setNewUser] = useState({\r\n        email : \"\",\r\n        password: \"\",\r\n    })\r\n    const [bottomMessage, setBottomMessage] = useState(\"\");\r\n    const [isLoading, setisLoading] = useState(false);\r\n\r\n    const login = async () => {\r\n        try {\r\n            newUser.email = newUser.email.toString().toLowerCase();\r\n            newUser.password = newUser.password.toString().toLowerCase();\r\n            const response = await axios.post(backendUrl, newUser);\r\n            if (response.status === 200) {\r\n                let currUser = response.data.user;\r\n                let newObj = {\r\n                    _id : currUser._id,\r\n                    email: currUser.email,\r\n                    firstName: currUser.firstName,\r\n                    lastName: currUser.lastName,\r\n                    spaces: currUser.spaces,\r\n                };\r\n                setUserContext(newObj);\r\n                setBottomMessage(\"Successully connected !\")\r\n                setTimeout(() => {\r\n                    navigation.navigate(\"Tableaux\")\r\n                }, 500)\r\n                \r\n            }\r\n        } catch(e) {\r\n            console.log(\"error : \", e.message)\r\n            setBottomMessage(\"Wo wo wo !! problème !\");\r\n        }\r\n    }\r\n\r\n  return (\r\n    <SafeAreaView style={{\r\n        backgroundColor: \"white\",\r\n        flex: 1\r\n    }}>\r\n      {/* Header */}\r\n      <View style={styles.header}>\r\n          <Text style={{\r\n              fontSize: 25,\r\n              color: \"white\"\r\n          }}>Se connecter</Text>\r\n      </View>\r\n\r\n      {/* Main body */}\r\n      <View>\r\n          {/* Logo */}\r\n        <Image source={require('./../assets/images/trello-logo.png')} style={{\r\n            ...constants.logoStyle,\r\n            marginTop: 15,\r\n            alignSelf: \"center\",\r\n            marginBottom: 20\r\n            }}/>\r\n\r\n        <TextInput \r\n            placeholder='Email'\r\n            style={styles.placeholder}\r\n            value={newUser.email}\r\n            onChangeText={t => {\r\n                setNewUser({...newUser, email : t})\r\n                console.log(newUser)\r\n            }}\r\n        />\r\n\r\n        \r\n\r\n        <TextInput \r\n            placeholder='Password'\r\n            style={styles.placeholder}\r\n            value={newUser.password}\r\n            secureTextEntry={true}\r\n            onChangeText={t => {\r\n                setNewUser({...newUser, password : t.toString()})\r\n                console.log(newUser)\r\n            }}\r\n        />\r\n\r\n      </View>\r\n\r\n      <Pressable \r\n        style={{\r\n            backgroundColor: constants.blue,\r\n            height: 50,\r\n            width: 200,\r\n            borderRadius: 10,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            alignSelf: \"center\",\r\n            marginTop: 10\r\n        }}\r\n        onPress={() => login()}\r\n      \r\n      >\r\n        <Text style={{\r\n            fontSize: 20,\r\n            color: \"white\"\r\n        }}>Log in</Text>\r\n      </Pressable >\r\n\r\n      <Pressable \r\n        style={{\r\n            backgroundColor: constants.blue,\r\n            height: 50,\r\n            width: 200,\r\n            borderRadius: 10,\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n            alignSelf: \"center\",\r\n            marginTop: 10\r\n        }}\r\n        onPress={() => navigation.navigate(\"Signup\")}\r\n      \r\n      >\r\n        <Text style={{\r\n            fontSize: 20,\r\n            color: \"white\"\r\n        }}>Créer un compte</Text>\r\n      </Pressable >\r\n\r\n      <Text style={{\r\n          alignSelf: \"center\",\r\n          fontSize: 20,\r\n          color: \"red\",\r\n          marginTop: 20\r\n      }}>{bottomMessage}</Text>\r\n    </SafeAreaView>\r\n  )\r\n}\r\n\r\nexport default LoginScreen\r\n\r\nconst styles = StyleSheet.create({\r\n    header: {\r\n        backgroundColor: constants.blue,\r\n        height: constants.headerHeight,\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\"\r\n    },\r\n\r\n    main: {\r\n        flex: 1,\r\n    },\r\n\r\n    placeholder: {\r\n        fontSize: 18,\r\n        borderBottomWidth: 2,\r\n        borderBottomColor: \"beige\",\r\n        borderLeftWidth: 2,\r\n        borderLeftColor: \"beige\",\r\n        marginLeft: 10,\r\n        marginBottom: 25,\r\n        paddingLeft: 15,\r\n        paddingBottom: 5,\r\n        width: \"90%\"\r\n    }\r\n})"]},"metadata":{},"sourceType":"module"}